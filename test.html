<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Voice Assisted Food Ordering</title>
<style>
    body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background: #fafafa;
        text-align: center;
    }

    h1 {
        margin-bottom: 20px;
    }

    #menu {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }

    .card {
        background: white;
        border-radius: 15px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        transition: transform 0.3s, box-shadow 0.3s;
        padding: 15px;
        cursor: pointer;
    }

    .card img {
        width: 100%;
        border-radius: 10px;
    }

    .card h3 {
        margin: 10px 0;
    }

    .card p {
        font-size: 14px;
        color: #555;
    }

    /* Highlight animation */
    .highlight {
        border: 3px solid #4caf50;
        box-shadow: 0 0 25px rgba(76, 175, 80, 0.8);
        transform: scale(1.05);
    }

    #output {
        margin-top: 20px;
        font-weight: bold;
        font-size: 18px;
    }

    #log {
        margin-top: 30px;
        background: #f4f4f4;
        padding: 10px;
        font-size: 14px;
        text-align: left;
    }

    button {
        padding: 12px 25px;
        font-size: 16px;
        background: #4caf50;
        color: white;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        transition: background 0.3s;
    }

    button:hover {
        background: #45a049;
    }
</style>
</head>
<body>

<h1>üçΩ Voice-Assisted Food Ordering</h1>
<p>This demo uses your microphone and will talk back to you.</p>
<button onclick="startApp()">Start Ordering</button>

<div id="menu">
    <div class="card" id="pizza">
        <img src="https://cdn.pixabay.com/photo/2017/12/09/08/18/pizza-3007395_1280.jpg" alt="Pizza">
        <h3>Pizza Margherita</h3>
        <p>$8</p>
    </div>
    <div class="card" id="burger">
        <img src="https://cdn.pixabay.com/photo/2016/03/05/19/02/hamburger-1238246_1280.jpg" alt="Burger">
        <h3>Veggie Burger</h3>
        <p>$5</p>
    </div>
    <div class="card" id="pasta">
        <img src="https://cdn.pixabay.com/photo/2015/04/08/13/13/food-712665_1280.jpg" alt="Pasta">
        <h3>Pasta Alfredo</h3>
        <p>$7</p>
    </div>
    <div class="card" id="brownie">
        <img src="https://cdn.pixabay.com/photo/2017/01/26/06/15/brownie-2015759_1280.jpg" alt="Brownie">
        <h3>Chocolate Brownie</h3>
        <p>$3</p>
    </div>
</div>

<div id="output">Press "Start Ordering" to begin.</div>
<div id="log">Logs will appear here...</div>

<script>
    const menu = [
        { id: "pizza", name: "Pizza Margherita" },
        { id: "burger", name: "Veggie Burger" },
        { id: "pasta", name: "Pasta Alfredo" },
        { id: "brownie", name: "Chocolate Brownie" }
    ];

    function log(msg) {
        document.getElementById('log').innerHTML += "<br>" + msg;
        console.log(msg);
    }

    function speak(text, callback) {
        let utterance = new SpeechSynthesisUtterance(text);
        utterance.rate = 1;
        utterance.onend = callback;
        speechSynthesis.speak(utterance);
        log("üîä Speaking: " + text);
    }

    function highlightItem(itemName) {
        // clear previous highlights
        menu.forEach(m => document.getElementById(m.id).classList.remove("highlight"));

        // find matching item
        let found = menu.find(m => itemName.toLowerCase().includes(m.name.toLowerCase().split(" ")[0]));
        if (found) {
            document.getElementById(found.id).classList.add("highlight");
        }
    }

    function listenForOrder() {
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        if (!SpeechRecognition) {
            speak("Sorry, your browser does not support speech recognition.");
            log("‚ùå SpeechRecognition not supported");
            return;
        }

        const recognition = new SpeechRecognition();
        recognition.lang = 'en-US';
        recognition.continuous = false;
        recognition.interimResults = false;

        recognition.start();
        log("üéô Listening for order...");

        recognition.onresult = (event) => {
            const transcript = event.results[0][0].transcript;
            document.getElementById('output').innerText = "You ordered: " + transcript;
            log("‚úÖ Heard: " + transcript);

            highlightItem(transcript);

            speak("You ordered " + transcript + ". Is that correct? Say yes to confirm or no to repeat.", handleConfirmation);
        };

        recognition.onerror = (event) => {
            log("‚ö† Error: " + event.error);
            speak("I didn't catch that. Please try again.", listenForOrder);
        };
    }

    function handleConfirmation() {
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const recognition = new SpeechRecognition();
        recognition.lang = 'en-US';

        recognition.start();
        log("üéô Listening for confirmation...");

        recognition.onresult = (event) => {
            const answer = event.results[0][0].transcript.toLowerCase();
            log("‚úÖ Confirmation heard: " + answer);

            if (answer.includes("yes")) {
                speak("Your order has been placed successfully. Thank you.");
            } else {
                speak("Let's try again. Please say your order.", listenForOrder);
            }
        };

        recognition.onerror = (event) => {
            log("‚ö† Error: " + event.error);
            speak("I didn't hear you. Please say yes or no.", handleConfirmation);
        };
    }

    function startApp() {
        log("‚ñ∂ App started");
        speak(
            "Welcome to our restaurant. Here is the menu. Pizza Margherita, Veggie Burger, Pasta Alfredo, and Chocolate Brownie. What would you like to order?",
            listenForOrder
        );
    }
</script>

</body>
</html>
